// Package resource_manager provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package resource_manager

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
